(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.addEventListener('load', function () {
  // コンソールの作成
  var view = document.getElementById('view');
  var viewCtx;
  var width, height;
  var bufferWidth = 320,
      bufferHeight = 240;
  var runBtn = document.getElementById('run'),
      pauseBtn = document.getElementById('pause'),
      stopBtn = document.getElementById('stop');
  //      resetBtn = document.getElementById('reset');
  var main;

  runBtn.disabled = "disabled";
  pauseBtn.disabled = "disabled";
  stopBtn.disabled = "disabled";
  //  resetBtn.disabled = "disabled";

  var STATUS = {
    stop: 0,
    run: 1,
    pause: 2,
    reset: 3
  };

  var status = STATUS.stop;

  // con.width = con.offsetWidth;
  // con.height = (con.offsetWidth * 3 / 4) | 0 ;
  function resize() {
    var cont = document.getElementById('content');
    if (cont.offsetWidth > 700) {
      view.width = 640;
      view.height = 480;
    } else {
      view.width = 320;
      view.height = 240;
    }
    width = view.offsetWidth;
    height = view.offsetHeight;
    viewCtx = view.getContext("2d");
    viewCtx.mozImageSmoothingEnabled = false;
    viewCtx.webkitImageSmoothingEnabled = false;
    viewCtx.msImageSmoothingEnabled = false;
    viewCtx.imageSmoothingEnabled = false;
    viewCtx.fillStyle = "rgb(0, 0, 0)";
    viewCtx.fillRect(0, 0, width, height);
  }
  resize();
  window.addEventListener('resize', resize);

  // バッファーのセットアップ
  var bufferCanvas = document.getElementById('buffer');
  var bufferCtx = bufferCanvas.getContext("2d");
  var buffer = bufferCtx.createImageData(bufferWidth, bufferHeight);
  var bufferData = buffer.data;

  // レンダリング
  function render() {
    requestAnimationFrame(render);
    if (status == STATUS.run) {
      bufferCtx.putImageData(buffer, 0, 0);
      viewCtx.fillStyle = "rgb(0, 0, 0)";
      viewCtx.fillRect(0, 0, width, height);
      viewCtx.drawImage(bufferCanvas, 0, 0, width, height);
      main && main();
    }
  }

  function updateStatus(s) {
    status = s;
    switch (s) {
      case STATUS.stop:
        runBtn.disabled = "";
        pauseBtn.disabled = "disabled";
        stopBtn.disabled = "disabled";
        break;
      case STATUS.run:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
      case STATUS.pause:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
    }
  }

  function pset(x, y, color) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = color.r;
    bufferData[offset + 1] = color.g;
    bufferData[offset + 2] = color.b;
    bufferData[offset + 3] = color.a;
  }

  function preset(x, y) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = 0;
    bufferData[offset + 1] = 0;
    bufferData[offset + 2] = 0;
    bufferData[offset + 3] = 0;
  }

  function cls() {
    for (var i = 0, e = bufferWidth * bufferHeight * 4; i < e; ++i) {
      bufferData[i] = 0;
    }
  }

  function run() {
    var gen = function* () {
      cls();
      var i = 0;
      var r = void 0,
          g = void 0,
          b = void 0;
      for (var y = 0; y < 240; ++y) {
        for (var x = 0; x < 320; ++x) {
          i += 1;
          r = i >> 8 & 0xff, g = i >> 4 & 0xff, b = i & 0xff;
          pset(x, y, { r: r, g: g, b: b, a: 255 });
        }
        yield;
      }
      updateStatus(STATUS.stop);
    }();
    main = gen.next.bind(gen);
  }

  runBtn.addEventListener('click', function () {
    updateStatus(STATUS.run);
    run();
  });

  pauseBtn.addEventListener('click', function () {
    if (status == STATUS.pause) {
      updateStatus(STATUS.run);
    } else {
      updateStatus(STATUS.pause);
    }
  });

  stopBtn.addEventListener('click', function () {
    updateStatus(STATUS.stop);
  });

  // resetBtn.addEventListener('click',()=>{
  //   updateStatus(STATUS.reset);
  // });

  updateStatus(STATUS.stop);
  render();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBR0EsT0FBTyxnQkFBUCxDQUF3QixNQUF4QixFQUErQixZQUFJOztBQUVqQyxNQUFJLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVAsQ0FGNkI7QUFHakMsTUFBSSxPQUFKLENBSGlDO0FBSWpDLE1BQUksS0FBSixFQUFVLE1BQVYsQ0FKaUM7QUFLakMsTUFBTSxjQUFjLEdBQWQ7TUFBa0IsZUFBZSxHQUFmLENBTFM7QUFNakMsTUFBSSxTQUFTLFNBQVMsY0FBVCxDQUF3QixLQUF4QixDQUFUO01BQ0EsV0FBVyxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWDtNQUNBLFVBQVUsU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVY7O0FBUjZCLE1BVTdCLElBQUosQ0FWaUM7O0FBWWpDLFNBQU8sUUFBUCxHQUFrQixVQUFsQixDQVppQztBQWFqQyxXQUFTLFFBQVQsR0FBb0IsVUFBcEIsQ0FiaUM7QUFjakMsVUFBUSxRQUFSLEdBQW1CLFVBQW5COzs7QUFkaUMsTUFpQjNCLFNBQVM7QUFDYixVQUFLLENBQUw7QUFDQSxTQUFJLENBQUo7QUFDQSxXQUFNLENBQU47QUFDQSxXQUFNLENBQU47R0FKSSxDQWpCMkI7O0FBd0JqQyxNQUFJLFNBQVMsT0FBTyxJQUFQOzs7O0FBeEJvQixXQTRCeEIsTUFBVCxHQUFpQjtBQUNmLFFBQUksT0FBTyxTQUFTLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBUCxDQURXO0FBRWYsUUFBRyxLQUFLLFdBQUwsR0FBbUIsR0FBbkIsRUFBdUI7QUFDeEIsV0FBSyxLQUFMLEdBQWEsR0FBYixDQUR3QjtBQUV4QixXQUFLLE1BQUwsR0FBYyxHQUFkLENBRndCO0tBQTFCLE1BR087QUFDTCxXQUFLLEtBQUwsR0FBYSxHQUFiLENBREs7QUFFTCxXQUFLLE1BQUwsR0FB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O0tBQWIsRUFBUCxDQURRO0FBaUJaLFdBQU8sSUFBSSxJQUFKLENBQVMsSUFBVCxDQUFjLEdBQWQsQ0FBUCxDQWpCWTtHQUFkOztBQW9CQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWdDLFlBQUk7QUFDbEMsaUJBQWEsT0FBTyxHQUFQLENBQWIsQ0FEa0M7QUFFbEMsVUFGa0M7R0FBSixDQUFoQyxDQXBJaUM7O0FBeUlqQyxXQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQWtDLFlBQUk7QUFDcEMsUUFBRyxVQUFVLE9BQU8sS0FBUCxFQUFhO0FBQ3hCLG1CQUFhLE9BQU8sR0FBUCxDQUFiLENBRHdCO0tBQTFCLE1BRU87QUFDTCxtQkFBYSxPQUFPLEtBQVAsQ0FBYixDQURLO0tBRlA7R0FEZ0MsQ0FBbEMsQ0F6SWlDOztBQWlKakMsVUFBUSxnQkFBUixDQUF5QixPQUF6QixFQUFpQyxZQUFJO0FBQ25DLGlCQUFhLE9BQU8sSUFBUCxDQUFiLENBRG1DO0dBQUosQ0FBakM7Ozs7OztBQWpKaUMsY0F5SmpDLENBQWEsT0FBTyxJQUFQLENBQWIsQ0F6SmlDO0FBMEpqQyxXQTFKaUM7Q0FBSixDQUEvQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsKCk9PntcclxuICAvLyDjgrPjg7Pjgr3jg7zjg6vjga7kvZzmiJBcclxuICB2YXIgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3Jyk7XHJcbiAgdmFyIHZpZXdDdHg7XHJcbiAgdmFyIHdpZHRoLGhlaWdodDtcclxuICBjb25zdCBidWZmZXJXaWR0aCA9IDMyMCxidWZmZXJIZWlnaHQgPSAyNDA7XHJcbiAgdmFyIHJ1bkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdydW4nKSxcclxuICAgICAgcGF1c2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGF1c2UnKSxcclxuICAgICAgc3RvcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9wJyk7XHJcbi8vICAgICAgcmVzZXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzZXQnKTtcclxuICB2YXIgbWFpbjtcclxuICAgICAgXHJcbiAgcnVuQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4gIHBhdXNlQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4gIHN0b3BCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbi8vICByZXNldEJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuXHJcbiAgY29uc3QgU1RBVFVTID0ge1xyXG4gICAgc3RvcDowLFxyXG4gICAgcnVuOjEsXHJcbiAgICBwYXVzZToyLFxyXG4gICAgcmVzZXQ6M1xyXG4gIH07XHJcbiAgXHJcbiAgdmFyIHN0YXR1cyA9IFNUQVRVUy5zdG9wO1xyXG4gICAgICBcclxuICAvLyBjb24ud2lkdGggPSBjb24ub2Zmc2V0V2lkdGg7XHJcbiAgLy8gY29uLmhlaWdodCA9IChjb24ub2Zmc2V0V2lkdGggKiAzIC8gNCkgfCAwIDtcclxuICBmdW5jdGlvbiByZXNpemUoKXtcclxuICAgIHZhciBjb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuICAgIGlmKGNvbnQub2Zmc2V0V2lkdGggPiA3MDApe1xyXG4gICAgICB2aWV3LndpZHRoID0gNjQwO1xyXG4gICAgICB2aWV3LmhlaWdodCA9IDQ4MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZpZXcud2lkdGggPSAzMjA7XHJcbiAgICAgIHZpZXcuaGVpZ2h0ID0gMjQwOyBcclxuICAgIH1cclxuICAgIHdpZHRoID0gdmlldy5vZmZzZXRXaWR0aDtcclxuICAgIGhlaWdodCA9IHZpZXcub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdmlld0N0eCA9IHZpZXcuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgdmlld0N0eC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgIHZpZXdDdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICB2aWV3Q3R4Lm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7ICAgIFxyXG4gICAgdmlld0N0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgIHZpZXdDdHguZmlsbFN0eWxlID0gXCJyZ2IoMCwgMCwgMClcIjtcclxuICAgIHZpZXdDdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgfVxyXG4gIHJlc2l6ZSgpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLHJlc2l6ZSk7XHJcbiAgXHJcbiAgLy8g44OQ44OD44OV44Kh44O844Gu44K744OD44OI44Ki44OD44OXXHJcbiAgdmFyIGJ1ZmZlckNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWZmZXInKTtcclxuICB2YXIgYnVmZmVyQ3R4ID0gYnVmZmVyQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB2YXIgYnVmZmVyID0gYnVmZmVyQ3R4LmNyZWF0ZUltYWdlRGF0YShidWZmZXJXaWR0aCxidWZmZXJIZWlnaHQpO1xyXG4gIHZhciBidWZmZXJEYXRhID0gYnVmZmVyLmRhdGE7XHJcbiAgXHJcbiAgLy8g44Os44Oz44OA44Oq44Oz44KwXHJcbiAgZnVuY3Rpb24gcmVuZGVyKCl7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxuICAgIGlmKHN0YXR1cyA9PSBTVEFUVVMucnVuKXtcclxuICAgICAgYnVmZmVyQ3R4LnB1dEltYWdlRGF0YShidWZmZXIsMCwwKTtcclxuICAgICAgdmlld0N0eC5maWxsU3R5bGUgPSBcInJnYigwLCAwLCAwKVwiO1xyXG4gICAgICB2aWV3Q3R4LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpO1xyXG4gICAgICB2aWV3Q3R4LmRyYXdJbWFnZShidWZmZXJDYW52YXMsMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgICAgIG1haW4gJiYgbWFpbigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMocyl7XHJcbiAgICBzdGF0dXMgPSBzO1xyXG4gICAgc3dpdGNoKHMpe1xyXG4gICAgICBjYXNlIFNUQVRVUy5zdG9wOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgcGF1c2VCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBTVEFUVVMucnVuOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBwYXVzZUJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgU1RBVFVTLnBhdXNlOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBwYXVzZUJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwc2V0KHgseSxjb2xvcil7XHJcbiAgICB2YXIgb2Zmc2V0ID0gKHkgKiBidWZmZXJXaWR0aCArIHgpICogNDtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0XSA9IGNvbG9yLnI7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDFdICA9IGNvbG9yLmc7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDJdID0gY29sb3IuYjtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0ICsgM10gPSBjb2xvci5hOyBcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByZXNldCh4LHkpe1xyXG4gICAgdmFyIG9mZnNldCA9ICh5ICogYnVmZmVyV2lkdGggKyB4KSAqIDQ7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldF0gPSAwO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAxXSAgPSAwO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAyXSA9IDA7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDNdID0gMDsgXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbHMoKXtcclxuICAgIGZvcih2YXIgaSA9IDAsZSA9IGJ1ZmZlcldpZHRoICogYnVmZmVySGVpZ2h0ICogNDtpIDwgZTsrK2kpXHJcbiAgICB7XHJcbiAgICAgIGJ1ZmZlckRhdGFbaV0gPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBydW4oKXtcclxuICAgIHZhciBnZW4gPSAoZnVuY3Rpb24gKiAoKXtcclxuICAgICAgY2xzKCk7XHJcbiAgICAgIHZhciAgaSA9IDA7XHJcbiAgICAgIGxldCByLGcsYjtcclxuICAgICAgZm9yKGxldCB5ID0gMDsgeSA8IDI0MDsrK3kpe1xyXG4gICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCAzMjA7Kyt4KXtcclxuICAgICAgICAgIGkrPTE7XHJcbiAgICAgICAgICByID0gKGkgPj4gOCkgJiAweGZmLCBcclxuICAgICAgICAgIGcgPSAoaSA+PiA0ICkgJiAweGZmLFxyXG4gICAgICAgICAgYiA9IGkgJiAweGZmO1xyXG4gICAgICAgICAgcHNldCh4LHkse3I6cixnOmcsYjpiLGE6MjU1fSlcclxuICAgICAgICB9XHJcbiAgICAgICAgeWllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5zdG9wKTtcclxuICAgIH0pKCk7ICBcclxuICAgIG1haW4gPSBnZW4ubmV4dC5iaW5kKGdlbik7XHJcbiAgfVxyXG5cclxuICBydW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgICB1cGRhdGVTdGF0dXMoU1RBVFVTLnJ1bik7XHJcbiAgICBydW4oKTtcclxuICB9KTtcclxuICBcclxuICBwYXVzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcclxuICAgIGlmKHN0YXR1cyA9PSBTVEFUVVMucGF1c2Upe1xyXG4gICAgICB1cGRhdGVTdGF0dXMoU1RBVFVTLnJ1bik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1cGRhdGVTdGF0dXMoU1RBVFVTLnBhdXNlKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgc3RvcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcclxuICAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMuc3RvcCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIHJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gIC8vICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5yZXNldCk7XHJcbiAgLy8gfSk7XHJcblxyXG4gIHVwZGF0ZVN0YXR1cyhTVEFUVVMuc3RvcCk7XHJcbiAgcmVuZGVyKCk7XHJcbn0pO1xyXG4iXX0=
