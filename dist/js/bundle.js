(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.addEventListener('load', function () {
  // コンソールの作成
  var view = document.getElementById('view');
  var viewCtx;
  var width, height;
  var bufferWidth = 320,
      bufferHeight = 240;
  var runBtn = document.getElementById('run'),
      pauseBtn = document.getElementById('pause'),
      stopBtn = document.getElementById('stop');
  //      resetBtn = document.getElementById('reset');
  var main;

  runBtn.disabled = "disabled";
  pauseBtn.disabled = "disabled";
  stopBtn.disabled = "disabled";
  //  resetBtn.disabled = "disabled";

  var STATUS = {
    stop: 0,
    run: 1,
    pause: 2,
    reset: 3
  };

  var status = STATUS.stop;

  // con.width = con.offsetWidth;
  // con.height = (con.offsetWidth * 3 / 4) | 0 ;
  function resize() {
    var cont = document.getElementById('content');
    if (cont.offsetWidth > 700) {
      view.width = 640;
      view.height = 480;
    } else {
      view.width = 320;
      view.height = 240;
    }
    width = view.offsetWidth;
    height = view.offsetHeight;
    viewCtx = view.getContext("2d");
    // viewCtx.mozImageSmoothingEnabled = false;
    // viewCtx.webkitImageSmoothingEnabled = false;
    // viewCtx.msImageSmoothingEnabled = false;   
    // viewCtx.imageSmoothingEnabled = false;
    viewCtx.fillStyle = "rgb(0, 0, 0)";
    viewCtx.fillRect(0, 0, width, height);
  }
  resize();
  window.addEventListener('resize', resize);

  // バッファーのセットアップ
  var bufferCanvas = document.getElementById('buffer');
  var bufferCtx = bufferCanvas.getContext("2d");
  var buffer = bufferCtx.createImageData(bufferWidth, bufferHeight);
  var bufferData = buffer.data;

  // レンダリング
  function render() {
    requestAnimationFrame(render);
    if (status == STATUS.run) {
      bufferCtx.putImageData(buffer, 0, 0);
      viewCtx.fillStyle = "rgb(0, 0, 0)";
      viewCtx.fillRect(0, 0, width, height);
      viewCtx.drawImage(bufferCanvas, 0, 0, width, height);
      main && main();
    }
  }

  function updateStatus(s) {
    status = s;
    switch (s) {
      case STATUS.stop:
        runBtn.disabled = "";
        pauseBtn.disabled = "disabled";
        stopBtn.disabled = "disabled";
        break;
      case STATUS.run:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
      case STATUS.pause:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
    }
  }

  function pset(x, y, color) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = color.r;
    bufferData[offset + 1] = color.g;
    bufferData[offset + 2] = color.b;
    bufferData[offset + 3] = color.a;
  }

  function preset(x, y) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = 0;
    bufferData[offset + 1] = 0;
    bufferData[offset + 2] = 0;
    bufferData[offset + 3] = 0;
  }

  function cls() {
    for (var i = 0, e = bufferWidth * bufferHeight * 4; i < e; ++i) {
      bufferData[i] = 0;
    }
  }

  function run() {
    var gen = function* () {
      cls();
      var i = 0;
      var r = void 0,
          g = void 0,
          b = void 0;
      for (var y = 0; y < 240; ++y) {
        for (var x = 0; x < 320; ++x) {
          i += 1;
          r = i >> 8 & 0xff, g = i >> 4 & 0xff, b = i & 0xff;
          pset(x, y, { r: r, g: g, b: b, a: 255 });
        }
        yield;
      }
      updateStatus(STATUS.stop);
    }();
    main = gen.next.bind(gen);
  }

  runBtn.addEventListener('click', function () {
    updateStatus(STATUS.run);
    run();
  });

  pauseBtn.addEventListener('click', function () {
    if (status == STATUS.pause) {
      updateStatus(STATUS.run);
    } else {
      updateStatus(STATUS.pause);
    }
  });

  stopBtn.addEventListener('click', function () {
    updateStatus(STATUS.stop);
  });

  // resetBtn.addEventListener('click',()=>{
  //   updateStatus(STATUS.reset);
  // });

  updateStatus(STATUS.stop);
  render();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBR0EsT0FBTyxnQkFBUCxDQUF3QixNQUF4QixFQUErQixZQUFJOztBQUVqQyxNQUFJLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVAsQ0FGNkI7QUFHakMsTUFBSSxPQUFKLENBSGlDO0FBSWpDLE1BQUksS0FBSixFQUFVLE1BQVYsQ0FKaUM7QUFLakMsTUFBTSxjQUFjLEdBQWQ7TUFBa0IsZUFBZSxHQUFmLENBTFM7QUFNakMsTUFBSSxTQUFTLFNBQVMsY0FBVCxDQUF3QixLQUF4QixDQUFUO01BQ0EsV0FBVyxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWDtNQUNBLFVBQVUsU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVY7O0FBUjZCLE1BVTdCLElBQUosQ0FWaUM7O0FBWWpDLFNBQU8sUUFBUCxHQUFrQixVQUFsQixDQVppQztBQWFqQyxXQUFTLFFBQVQsR0FBb0IsVUFBcEIsQ0FiaUM7QUFjakMsVUFBUSxRQUFSLEdBQW1CLFVBQW5COzs7QUFkaUMsTUFpQjNCLFNBQVM7QUFDYixVQUFLLENBQUw7QUFDQSxTQUFJLENBQUo7QUFDQSxXQUFNLENBQU47QUFDQSxXQUFNLENBQU47R0FKSSxDQWpCMkI7O0FBd0JqQyxNQUFJLFNBQVMsT0FBTyxJQUFQOzs7O0FBeEJvQixXQTRCeEIsTUFBVCxHQUFpQjtBQUNmLFFBQUksT0FBTyxTQUFTLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBUCxDQURXO0FBRWYsUUFBRyxLQUFLLFdBQUwsR0FBbUIsR0FBbkIsRUFBdUI7QUFDeEIsV0FBSyxLQUFMLEdBQWEsR0FBYixDQUR3QjtBQUV4QixXQUFLLE1BQUwsR0FBYyxHQUFkLENBRndCO0tBQTFCLE1BR087QUFDTCxXQUFLLEtBQUwsR0FBYSxHQUFiLENBREs7QUFFTCxXQUFLLE1BQUwsR0FBYyxHQUFkLENBRks7S0FIUDtBQU9BLFlBQVEsS0FBSyxXQUFMLENBVE87QUFVZixhQUFTLEtBQUssWUFBTCxDQVZNO0FBV2YsY0FBVSxLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBVjs7Ozs7QUFYZSxXQWdCZixDQUFRLFNBQVIsR0FBb0IsY0FBcEIsQ0FoQmU7QUFpQmYsWUFBUSxRQUFSLENBQWlCLENBQWpCLEVBQW1CLENBQW5CLEVBQXFCLEtBQXJCLEVBQTJCLE1BQTNCLEVBakJlO0dBQWpCO0FBbUJBLFdBL0NpQztBQWdEakMsU0FBTyxnQkFBUCxDQUF3QixRQUF4QixFQUFpQyxNQUFqQzs7O0FBaERpQyxNQW1EN0IsZUFBZSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZixDQW5ENkI7QUFvRGpDLE1BQUksWUFBWSxhQUFhLFVBQWIsQ0FBd0IsSUFBeEIsQ0FBWixDQXBENkI7QUFxRGpDLE1BQUksU0FBUyxVQUFVLGVBQVYsQ0FBMEIsV0FBMUIsRUFBc0MsWUFBdEMsQ0FBVCxDQXJENkI7QUFzRGpDLE1BQUksYUFBYSxPQUFPLElBQVA7OztBQXREZ0IsV0F5RHhCLE1BQVQsR0FBaUI7QUFDZiwwQkFBc0IsTUFBdEIsRUFEZTtBQUVmLFFBQUcsVUFBVSxPQUFPLEdBQVAsRUFBVztBQUN0QixnQkFBVSxZQUFWLENBQXVCLE1BQXZCLEVBQThCLENBQTlCLEVBQWdDLENBQWhDLEVBRHNCO0FBRXRCLGNBQVEsU0FBUixHQUFvQixjQUFwQixDQUZzQjtBQUd0QixjQUFRLFFBQVIsQ0FBaUIsQ0FBakIsRUFBbUIsQ0FBbkIsRUFBcUIsS0FBckIsRUFBMkIsTUFBM0IsRUFIc0I7QUFJdEIsY0FBUSxTQUFSLENBQWtCLFlBQWxCLEVBQStCLENBQS9CLEVBQWlDLENBQWpDLEVBQW1DLEtBQW5DLEVBQXlDLE1BQXpDLEVBSnNCO0FBS3RCLGNBQVEsTUFBUixDQUxzQjtLQUF4QjtHQUZGOztBQVdBLFdBQVMsWUFBVCxDQUFzQixDQUF0QixFQUF3QjtBQUN0QixhQUFTLENBQVQsQ0FEc0I7QUFFdEIsWUFBTyxDQUFQO0FBQ0UsV0FBSyxPQUFPLElBQVA7QUFDSCxlQUFPLFFBQVAsR0FBa0IsRUFBbEIsQ0FERjtBQUVFLGlCQUFTLFFBQVQsR0FBb0IsVUFBcEIsQ0FGRjtBQUdFLGdCQUFRLFFBQVIsR0FBbUIsVUFBbkIsQ0FIRjtBQUlFLGNBSkY7QUFERixXQU1PLE9BQU8sR0FBUDtBQUNILGVBQU8sUUFBUCxHQUFrQixVQUFsQixDQURGO0FBRUUsaUJBQVMsUUFBVCxHQUFvQixFQUFwQixDQUZGO0FBR0UsZ0JBQVEsUUFBUixHQUFtQixFQUFuQixDQUhGO0FBSUUsY0FKRjtBQU5GLFdBV08sT0FBTyxLQUFQO0FBQ0gsZUFBTyxRQUFQLEdBQWtCLFVBQWxCLENBREY7QUFFRSxpQkFBUyxRQUFULEdBQW9CLEVBQXBCLENBRkY7QUFHRSxnQkFBUSxRQUFSLEdBQW1CLEVBQW5CLENBSEY7QUFJRSxjQUpGO0FBWEYsS0FGc0I7R0FBeEI7O0FBcUJBLFdBQVMsSUFBVCxDQUFjLENBQWQsRUFBZ0IsQ0FBaEIsRUFBa0IsS0FBbEIsRUFBd0I7QUFDdEIsUUFBSSxTQUFTLENBQUMsSUFBSSxXQUFKLEdBQWtCLENBQWxCLENBQUQsR0FBd0IsQ0FBeEIsQ0FEUztBQUV0QixlQUFXLE1BQVgsSUFBcUIsTUFBTSxDQUFOLENBRkM7QUFHdEIsZUFBVyxTQUFTLENBQVQsQ0FBWCxHQUEwQixNQUFNLENBQU4sQ0FISjtBQUl0QixlQUFXLFNBQVMsQ0FBVCxDQUFYLEdBQXlCLE1BQU0sQ0FBTixDQUpIO0FBS3RCLGVBQVcsU0FBUyxDQUFULENBQVgsR0FBeUIsTUFBTSxDQUFOLENBTEg7R0FBeEI7O0FBUUEsV0FBUyxNQUFULENBQWdCLENBQWhCLEVBQWtCLENBQWxCLEVBQW9CO0FBQ2xCLFFBQUksU0FBUyxDQUFDLElBQUksV0FBSixHQUFrQixDQUFsQixDQUFELEdBQXdCLENBQXhCLENBREs7QUFFbEIsZUFBVyxNQUFYLElBQXFCLENBQXJCLENBRmtCO0FBR2xCLGVBQVcsU0FBUyxDQUFULENBQVgsR0FBMEIsQ0FBMUIsQ0FIa0I7QUFJbEIsZUFBVyxTQUFTLENBQVQsQ0FBWCxHQUF5QixDQUF6QixDQUprQjtBQUtsQixlQUFXLFNBQVMsQ0FBVCxDQUFYLEdBQXlCLENBQXpCLENBTGtCO0dBQXBCOztBQVFBLFdBQVMsR0FBVCxHQUFjO0FBQ1osU0FBSSxJQUFJLElBQUksQ0FBSixFQUFNLElBQUksY0FBYyxZQUFkLEdBQTZCLENBQTdCLEVBQStCLElBQUksQ0FBSixFQUFNLEVBQUUsQ0FBRixFQUN2RDtBQUNFLGlCQUFXLENBQVgsSUFBZ0IsQ0FBaEIsQ0FERjtLQURBO0dBREY7O0FBT0EsV0FBUyxHQUFULEdBQWM7QUFDWixRQUFJLE1BQU0sYUFBYztBQUN0QixZQURzQjtBQUV0QixVQUFLLElBQUksQ0FBSixDQUZpQjtBQUd0QixVQUFJLFVBQUo7VUFBTSxVQUFOO1VBQVEsVUFBUixDQUhzQjtBQUl0QixXQUFJLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxHQUFKLEVBQVEsRUFBRSxDQUFGLEVBQUk7QUFDekIsYUFBSSxJQUFJLElBQUksQ0FBSixFQUFPLElBQUksR0FBSixFQUFRLEVBQUUsQ0FBRixFQUFJO0FBQ3pCLGVBQUcsQ0FBSCxDQUR5QjtBQUV6QixjQUFJLENBQUMsSUFBSyxDQUFMLEdBQVUsSUFBWCxFQUNKLElBQUksQ0FBQyxJQUFLLENBQUwsR0FBVyxJQUFaLEVBQ0osSUFBSSxJQUFJLElBQUosQ0FKcUI7QUFLekIsZUFBSyxDQUFMLEVBQU8sQ0FBUCxFQUFTLEVBQUMsR0FBRSxDQUFGLEVBQUksR0FBRSxDQUFGLEVBQUksR0FBRSxDQUFGLEVBQUksR0FBRSxHQUFGLEVBQXRCLEVBTHlCO1NBQTNCO0FBT0EsY0FSeUI7T0FBM0I7QUFVQSxtQkFBYSxPQUFPLElBQVAsQ0FBYixDQWRzQjtLQUFiLEVBQVAsQ0FEUTtBQWlCWixXQUFPLElBQUksSUFBSixDQUFTLElBQVQsQ0FBYyxHQUFkLENBQVAsQ0FqQlk7R0FBZDs7QUFvQkEsU0FBTyxnQkFBUCxDQUF3QixPQUF4QixFQUFnQyxZQUFJO0FBQ2xDLGlCQUFhLE9BQU8sR0FBUCxDQUFiLENBRGtDO0FBRWxDLFVBRmtDO0dBQUosQ0FBaEMsQ0FwSWlDOztBQXlJakMsV0FBUyxnQkFBVCxDQUEwQixPQUExQixFQUFrQyxZQUFJO0FBQ3BDLFFBQUcsVUFBVSxPQUFPLEtBQVAsRUFBYTtBQUN4QixtQkFBYSxPQUFPLEdBQVAsQ0FBYixDQUR3QjtLQUExQixNQUVPO0FBQ0wsbUJBQWEsT0FBTyxLQUFQLENBQWIsQ0FESztLQUZQO0dBRGdDLENBQWxDLENBeklpQzs7QUFpSmpDLFVBQVEsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBaUMsWUFBSTtBQUNuQyxpQkFBYSxPQUFPLElBQVAsQ0FBYixDQURtQztHQUFKLENBQWpDOzs7Ozs7QUFqSmlDLGNBeUpqQyxDQUFhLE9BQU8sSUFBUCxDQUFiLENBekppQztBQTBKakMsV0ExSmlDO0NBQUosQ0FBL0IiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCgpPT57XHJcbiAgLy8g44Kz44Oz44K944O844Or44Gu5L2c5oiQXHJcbiAgdmFyIHZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldycpO1xyXG4gIHZhciB2aWV3Q3R4O1xyXG4gIHZhciB3aWR0aCxoZWlnaHQ7XHJcbiAgY29uc3QgYnVmZmVyV2lkdGggPSAzMjAsYnVmZmVySGVpZ2h0ID0gMjQwO1xyXG4gIHZhciBydW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncnVuJyksXHJcbiAgICAgIHBhdXNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhdXNlJyksXHJcbiAgICAgIHN0b3BCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcCcpO1xyXG4vLyAgICAgIHJlc2V0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0Jyk7XHJcbiAgdmFyIG1haW47XHJcbiAgICAgIFxyXG4gIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICBwYXVzZUJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICBzdG9wQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4vLyAgcmVzZXRCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcblxyXG4gIGNvbnN0IFNUQVRVUyA9IHtcclxuICAgIHN0b3A6MCxcclxuICAgIHJ1bjoxLFxyXG4gICAgcGF1c2U6MixcclxuICAgIHJlc2V0OjNcclxuICB9O1xyXG4gIFxyXG4gIHZhciBzdGF0dXMgPSBTVEFUVVMuc3RvcDtcclxuICAgICAgXHJcbiAgLy8gY29uLndpZHRoID0gY29uLm9mZnNldFdpZHRoO1xyXG4gIC8vIGNvbi5oZWlnaHQgPSAoY29uLm9mZnNldFdpZHRoICogMyAvIDQpIHwgMCA7XHJcbiAgZnVuY3Rpb24gcmVzaXplKCl7XHJcbiAgICB2YXIgY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcbiAgICBpZihjb250Lm9mZnNldFdpZHRoID4gNzAwKXtcclxuICAgICAgdmlldy53aWR0aCA9IDY0MDtcclxuICAgICAgdmlldy5oZWlnaHQgPSA0ODA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2aWV3LndpZHRoID0gMzIwO1xyXG4gICAgICB2aWV3LmhlaWdodCA9IDI0MDsgXHJcbiAgICB9XHJcbiAgICB3aWR0aCA9IHZpZXcub2Zmc2V0V2lkdGg7XHJcbiAgICBoZWlnaHQgPSB2aWV3Lm9mZnNldEhlaWdodDtcclxuICAgIHZpZXdDdHggPSB2aWV3LmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIC8vIHZpZXdDdHgubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICAvLyB2aWV3Q3R4LndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgLy8gdmlld0N0eC5tc0ltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlOyAgICBcclxuICAgIC8vIHZpZXdDdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICB2aWV3Q3R4LmZpbGxTdHlsZSA9IFwicmdiKDAsIDAsIDApXCI7XHJcbiAgICB2aWV3Q3R4LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpO1xyXG4gIH1cclxuICByZXNpemUoKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJyxyZXNpemUpO1xyXG4gIFxyXG4gIC8vIOODkOODg+ODleOCoeODvOOBruOCu+ODg+ODiOOCouODg+ODl1xyXG4gIHZhciBidWZmZXJDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnVmZmVyJyk7XHJcbiAgdmFyIGJ1ZmZlckN0eCA9IGJ1ZmZlckNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgdmFyIGJ1ZmZlciA9IGJ1ZmZlckN0eC5jcmVhdGVJbWFnZURhdGEoYnVmZmVyV2lkdGgsYnVmZmVySGVpZ2h0KTtcclxuICB2YXIgYnVmZmVyRGF0YSA9IGJ1ZmZlci5kYXRhO1xyXG4gIFxyXG4gIC8vIOODrOODs+ODgOODquODs+OCsFxyXG4gIGZ1bmN0aW9uIHJlbmRlcigpe1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcbiAgICBpZihzdGF0dXMgPT0gU1RBVFVTLnJ1bil7XHJcbiAgICAgIGJ1ZmZlckN0eC5wdXRJbWFnZURhdGEoYnVmZmVyLDAsMCk7XHJcbiAgICAgIHZpZXdDdHguZmlsbFN0eWxlID0gXCJyZ2IoMCwgMCwgMClcIjtcclxuICAgICAgdmlld0N0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTtcclxuICAgICAgdmlld0N0eC5kcmF3SW1hZ2UoYnVmZmVyQ2FudmFzLDAsMCx3aWR0aCxoZWlnaHQpO1xyXG4gICAgICBtYWluICYmIG1haW4oKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHMpe1xyXG4gICAgc3RhdHVzID0gcztcclxuICAgIHN3aXRjaChzKXtcclxuICAgICAgY2FzZSBTVEFUVVMuc3RvcDpcclxuICAgICAgICBydW5CdG4uZGlzYWJsZWQgPSBcIlwiO1xyXG4gICAgICAgIHBhdXNlQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4gICAgICAgIHN0b3BCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgU1RBVFVTLnJ1bjpcclxuICAgICAgICBydW5CdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbiAgICAgICAgcGF1c2VCdG4uZGlzYWJsZWQgPSBcIlwiO1xyXG4gICAgICAgIHN0b3BCdG4uZGlzYWJsZWQgPSBcIlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFNUQVRVUy5wYXVzZTpcclxuICAgICAgICBydW5CdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbiAgICAgICAgcGF1c2VCdG4uZGlzYWJsZWQgPSBcIlwiO1xyXG4gICAgICAgIHN0b3BCdG4uZGlzYWJsZWQgPSBcIlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcHNldCh4LHksY29sb3Ipe1xyXG4gICAgdmFyIG9mZnNldCA9ICh5ICogYnVmZmVyV2lkdGggKyB4KSAqIDQ7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldF0gPSBjb2xvci5yO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAxXSAgPSBjb2xvci5nO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAyXSA9IGNvbG9yLmI7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDNdID0gY29sb3IuYTsgXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwcmVzZXQoeCx5KXtcclxuICAgIHZhciBvZmZzZXQgPSAoeSAqIGJ1ZmZlcldpZHRoICsgeCkgKiA0O1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXRdID0gMDtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0ICsgMV0gID0gMDtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0ICsgMl0gPSAwO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAzXSA9IDA7IFxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xzKCl7XHJcbiAgICBmb3IodmFyIGkgPSAwLGUgPSBidWZmZXJXaWR0aCAqIGJ1ZmZlckhlaWdodCAqIDQ7aSA8IGU7KytpKVxyXG4gICAge1xyXG4gICAgICBidWZmZXJEYXRhW2ldID0gMDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gcnVuKCl7XHJcbiAgICB2YXIgZ2VuID0gKGZ1bmN0aW9uICogKCl7XHJcbiAgICAgIGNscygpO1xyXG4gICAgICB2YXIgIGkgPSAwO1xyXG4gICAgICBsZXQgcixnLGI7XHJcbiAgICAgIGZvcihsZXQgeSA9IDA7IHkgPCAyNDA7Kyt5KXtcclxuICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgMzIwOysreCl7XHJcbiAgICAgICAgICBpKz0xO1xyXG4gICAgICAgICAgciA9IChpID4+IDgpICYgMHhmZiwgXHJcbiAgICAgICAgICBnID0gKGkgPj4gNCApICYgMHhmZixcclxuICAgICAgICAgIGIgPSBpICYgMHhmZjtcclxuICAgICAgICAgIHBzZXQoeCx5LHtyOnIsZzpnLGI6YixhOjI1NX0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHlpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMuc3RvcCk7XHJcbiAgICB9KSgpOyAgXHJcbiAgICBtYWluID0gZ2VuLm5leHQuYmluZChnZW4pO1xyXG4gIH1cclxuXHJcbiAgcnVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5ydW4pO1xyXG4gICAgcnVuKCk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgcGF1c2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgICBpZihzdGF0dXMgPT0gU1RBVFVTLnBhdXNlKXtcclxuICAgICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5ydW4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5wYXVzZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHN0b3BCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgICB1cGRhdGVTdGF0dXMoU1RBVFVTLnN0b3ApO1xyXG4gIH0pO1xyXG5cclxuICAvLyByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcclxuICAvLyAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMucmVzZXQpO1xyXG4gIC8vIH0pO1xyXG5cclxuICB1cGRhdGVTdGF0dXMoU1RBVFVTLnN0b3ApO1xyXG4gIHJlbmRlcigpO1xyXG59KTtcclxuIl19
