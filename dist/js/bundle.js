(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.addEventListener('load', function () {
  // コンソールの作成
  var view = document.getElementById('view');
  var viewCtx;
  var width, height;
  var bufferWidth = 320,
      bufferHeight = 240;
  var runBtn = document.getElementById('run'),
      pauseBtn = document.getElementById('pause'),
      stopBtn = document.getElementById('stop');
  //      resetBtn = document.getElementById('reset');
  var main;

  runBtn.disabled = "disabled";
  pauseBtn.disabled = "disabled";
  stopBtn.disabled = "disabled";
  //  resetBtn.disabled = "disabled";

  var STATUS = {
    stop: 0,
    run: 1,
    pause: 2,
    reset: 3
  };

  var status = STATUS.stop;

  // con.width = con.offsetWidth;
  // con.height = (con.offsetWidth * 3 / 4) | 0 ;
  function resize() {
    var cont = document.getElementById('content');
    if (cont.offsetWidth > 700) {
      view.width = 640;
      view.height = 480;
    } else {
      view.width = 320;
      view.height = 240;
    }
    width = view.offsetWidth;
    height = view.offsetHeight;
    viewCtx = view.getContext("2d");
    viewCtx.imageSmoothingEnabled = false;
    viewCtx.fillStyle = "rgb(0, 0, 0)";
    viewCtx.fillRect(0, 0, width, height);
  }
  resize();
  window.addEventListener('resize', resize);

  // バッファーのセットアップ
  var bufferCanvas = document.getElementById('buffer');
  var bufferCtx = bufferCanvas.getContext("2d");
  var buffer = bufferCtx.createImageData(bufferWidth, bufferHeight);
  var bufferData = buffer.data;

  // レンダリング
  function render() {
    requestAnimationFrame(render);
    if (status == STATUS.run) {
      bufferCtx.putImageData(buffer, 0, 0);
      viewCtx.fillStyle = "rgb(0, 0, 0)";
      viewCtx.fillRect(0, 0, width, height);
      viewCtx.drawImage(bufferCanvas, 0, 0, width, height);
      main && main();
    }
  }

  function updateStatus(s) {
    status = s;
    switch (s) {
      case STATUS.stop:
        runBtn.disabled = "";
        pauseBtn.disabled = "disabled";
        stopBtn.disabled = "disabled";
        break;
      case STATUS.run:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
      case STATUS.pause:
        runBtn.disabled = "disabled";
        pauseBtn.disabled = "";
        stopBtn.disabled = "";
        break;
    }
  }

  function pset(x, y, color) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = color.r;
    bufferData[offset + 1] = color.g;
    bufferData[offset + 2] = color.b;
    bufferData[offset + 3] = color.a;
  }

  function preset(x, y) {
    var offset = (y * bufferWidth + x) * 4;
    bufferData[offset] = 0;
    bufferData[offset + 1] = 0;
    bufferData[offset + 2] = 0;
    bufferData[offset + 3] = 0;
  }

  function cls() {
    for (var i = 0, e = bufferWidth * bufferHeight; i < e; ++i) {
      bufferData[i * 4] = 0;
      bufferData[i * 4 + 1] = 0;
      bufferData[i * 4 + 2] = 0;
      bufferData[i * 4 + 3] = 0;
    }
  }

  function run() {
    var gen = function* () {
      cls();
      var i = 0;
      var r = void 0,
          g = void 0,
          b = void 0;
      for (var y = 0; y < 240; ++y) {
        for (var x = 0; x < 320; ++x) {
          i += 1;
          r = i >> 8 & 0xff, g = i >> 4 & 0xff, b = i & 0xff;
          pset(x, y, { r: r, g: g, b: b, a: 255 });
        }
        yield;
      }
      updateStatus(STATUS.stop);
    }();
    main = gen.next.bind(gen);
  }

  runBtn.addEventListener('click', function () {
    updateStatus(STATUS.run);
    run();
  });

  pauseBtn.addEventListener('click', function () {
    if (status == STATUS.pause) {
      updateStatus(STATUS.run);
    } else {
      updateStatus(STATUS.pause);
    }
  });

  stopBtn.addEventListener('click', function () {
    updateStatus(STATUS.stop);
  });

  // resetBtn.addEventListener('click',()=>{
  //   updateStatus(STATUS.reset);
  // });

  updateStatus(STATUS.stop);
  render();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBR0EsT0FBTyxnQkFBUCxDQUF3QixNQUF4QixFQUErQixZQUFJOztBQUVqQyxNQUFJLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVAsQ0FGNkI7QUFHakMsTUFBSSxPQUFKLENBSGlDO0FBSWpDLE1BQUksS0FBSixFQUFVLE1BQVYsQ0FKaUM7QUFLakMsTUFBTSxjQUFjLEdBQWQ7TUFBa0IsZUFBZSxHQUFmLENBTFM7QUFNakMsTUFBSSxTQUFTLFNBQVMsY0FBVCxDQUF3QixLQUF4QixDQUFUO01BQ0EsV0FBVyxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWDtNQUNBLFVBQVUsU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQVY7O0FBUjZCLE1BVTdCLElBQUosQ0FWaUM7O0FBWWpDLFNBQU8sUUFBUCxHQUFrQixVQUFsQixDQVppQztBQWFqQyxXQUFTLFFBQVQsR0FBb0IsVUFBcEIsQ0FiaUM7QUFjakMsVUFBUSxRQUFSLEdBQW1CLFVBQW5COzs7QUFkaUMsTUFpQjNCLFNBQVM7QUFDYixVQUFLLENBQUw7QUFDQSxTQUFJLENBQUo7QUFDQSxXQUFNLENBQU47QUFDQSxXQUFNLENBQU47R0FKSSxDQWpCMkI7O0FBd0JqQyxNQUFJLFNBQVMsT0FBTyxJQUFQOzs7O0FBeEJvQixXQTRCeEIsTUFBVCxHQUFpQjtBQUNmLFFBQUksT0FBTyxTQUFTLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBUCxDQURXO0FBRWYsUUFBRyxLQUFLLFdBQUwsR0FBbUIsR0FBbkIsRUFBdUI7QUFDeEIsV0FBSyxLQUFMLEdBQWEsR0FBYixDQUR3QjtBQUV4QixXQUFLLE1BQUwsR0FBYyxHQUFkLENBRndCO0tBQTFCLE1BR087QUFDTCxXQUFLLEtBQUwsR0FBYSxHQUFiLENBREs7QUFFTCxXQUFLLE1BQUwsR0FB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U0FBM0I7QUFPQSxjQVJ5QjtPQUEzQjtBQVVBLG1CQUFhLE9BQU8sSUFBUCxDQUFiLENBZHNCO0tBQWIsRUFBUCxDQURRO0FBaUJaLFdBQU8sSUFBSSxJQUFKLENBQVMsSUFBVCxDQUFjLEdBQWQsQ0FBUCxDQWpCWTtHQUFkOztBQW9CQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWdDLFlBQUk7QUFDbEMsaUJBQWEsT0FBTyxHQUFQLENBQWIsQ0FEa0M7QUFFbEMsVUFGa0M7R0FBSixDQUFoQyxDQXBJaUM7O0FBeUlqQyxXQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQWtDLFlBQUk7QUFDcEMsUUFBRyxVQUFVLE9BQU8sS0FBUCxFQUFhO0FBQ3hCLG1CQUFhLE9BQU8sR0FBUCxDQUFiLENBRHdCO0tBQTFCLE1BRU87QUFDTCxtQkFBYSxPQUFPLEtBQVAsQ0FBYixDQURLO0tBRlA7R0FEZ0MsQ0FBbEMsQ0F6SWlDOztBQWlKakMsVUFBUSxnQkFBUixDQUF5QixPQUF6QixFQUFpQyxZQUFJO0FBQ25DLGlCQUFhLE9BQU8sSUFBUCxDQUFiLENBRG1DO0dBQUosQ0FBakM7Ozs7OztBQWpKaUMsY0F5SmpDLENBQWEsT0FBTyxJQUFQLENBQWIsQ0F6SmlDO0FBMEpqQyxXQTFKaUM7Q0FBSixDQUEvQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsKCk9PntcclxuICAvLyDjgrPjg7Pjgr3jg7zjg6vjga7kvZzmiJBcclxuICB2YXIgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3Jyk7XHJcbiAgdmFyIHZpZXdDdHg7XHJcbiAgdmFyIHdpZHRoLGhlaWdodDtcclxuICBjb25zdCBidWZmZXJXaWR0aCA9IDMyMCxidWZmZXJIZWlnaHQgPSAyNDA7XHJcbiAgdmFyIHJ1bkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdydW4nKSxcclxuICAgICAgcGF1c2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGF1c2UnKSxcclxuICAgICAgc3RvcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9wJyk7XHJcbi8vICAgICAgcmVzZXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzZXQnKTtcclxuICB2YXIgbWFpbjtcclxuICAgICAgXHJcbiAgcnVuQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4gIHBhdXNlQnRuLmRpc2FibGVkID0gXCJkaXNhYmxlZFwiO1xyXG4gIHN0b3BCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbi8vICByZXNldEJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuXHJcbiAgY29uc3QgU1RBVFVTID0ge1xyXG4gICAgc3RvcDowLFxyXG4gICAgcnVuOjEsXHJcbiAgICBwYXVzZToyLFxyXG4gICAgcmVzZXQ6M1xyXG4gIH07XHJcbiAgXHJcbiAgdmFyIHN0YXR1cyA9IFNUQVRVUy5zdG9wO1xyXG4gICAgICBcclxuICAvLyBjb24ud2lkdGggPSBjb24ub2Zmc2V0V2lkdGg7XHJcbiAgLy8gY29uLmhlaWdodCA9IChjb24ub2Zmc2V0V2lkdGggKiAzIC8gNCkgfCAwIDtcclxuICBmdW5jdGlvbiByZXNpemUoKXtcclxuICAgIHZhciBjb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuICAgIGlmKGNvbnQub2Zmc2V0V2lkdGggPiA3MDApe1xyXG4gICAgICB2aWV3LndpZHRoID0gNjQwO1xyXG4gICAgICB2aWV3LmhlaWdodCA9IDQ4MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZpZXcud2lkdGggPSAzMjA7XHJcbiAgICAgIHZpZXcuaGVpZ2h0ID0gMjQwOyBcclxuICAgIH1cclxuICAgIHdpZHRoID0gdmlldy5vZmZzZXRXaWR0aDtcclxuICAgIGhlaWdodCA9IHZpZXcub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdmlld0N0eCA9IHZpZXcuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgdmlld0N0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgIHZpZXdDdHguZmlsbFN0eWxlID0gXCJyZ2IoMCwgMCwgMClcIjtcclxuICAgIHZpZXdDdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgfVxyXG4gIHJlc2l6ZSgpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLHJlc2l6ZSk7XHJcbiAgXHJcbiAgLy8g44OQ44OD44OV44Kh44O844Gu44K744OD44OI44Ki44OD44OXXHJcbiAgdmFyIGJ1ZmZlckNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWZmZXInKTtcclxuICB2YXIgYnVmZmVyQ3R4ID0gYnVmZmVyQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB2YXIgYnVmZmVyID0gYnVmZmVyQ3R4LmNyZWF0ZUltYWdlRGF0YShidWZmZXJXaWR0aCxidWZmZXJIZWlnaHQpO1xyXG4gIHZhciBidWZmZXJEYXRhID0gYnVmZmVyLmRhdGE7XHJcbiAgXHJcbiAgLy8g44Os44Oz44OA44Oq44Oz44KwXHJcbiAgZnVuY3Rpb24gcmVuZGVyKCl7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxuICAgIGlmKHN0YXR1cyA9PSBTVEFUVVMucnVuKXtcclxuICAgICAgYnVmZmVyQ3R4LnB1dEltYWdlRGF0YShidWZmZXIsMCwwKTtcclxuICAgICAgdmlld0N0eC5maWxsU3R5bGUgPSBcInJnYigwLCAwLCAwKVwiO1xyXG4gICAgICB2aWV3Q3R4LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpO1xyXG4gICAgICB2aWV3Q3R4LmRyYXdJbWFnZShidWZmZXJDYW52YXMsMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgICAgIG1haW4gJiYgbWFpbigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMocyl7XHJcbiAgICBzdGF0dXMgPSBzO1xyXG4gICAgc3dpdGNoKHMpe1xyXG4gICAgICBjYXNlIFNUQVRVUy5zdG9wOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgcGF1c2VCdG4uZGlzYWJsZWQgPSBcImRpc2FibGVkXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBTVEFUVVMucnVuOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBwYXVzZUJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgU1RBVFVTLnBhdXNlOlxyXG4gICAgICAgIHJ1bkJ0bi5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICBwYXVzZUJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwc2V0KHgseSxjb2xvcil7XHJcbiAgICB2YXIgb2Zmc2V0ID0gKHkgKiBidWZmZXJXaWR0aCArIHgpICogNDtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0XSA9IGNvbG9yLnI7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDFdICA9IGNvbG9yLmc7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDJdID0gY29sb3IuYjtcclxuICAgIGJ1ZmZlckRhdGFbb2Zmc2V0ICsgM10gPSBjb2xvci5hOyBcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByZXNldCh4LHkpe1xyXG4gICAgdmFyIG9mZnNldCA9ICh5ICogYnVmZmVyV2lkdGggKyB4KSAqIDQ7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldF0gPSAwO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAxXSAgPSAwO1xyXG4gICAgYnVmZmVyRGF0YVtvZmZzZXQgKyAyXSA9IDA7XHJcbiAgICBidWZmZXJEYXRhW29mZnNldCArIDNdID0gMDsgXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbHMoKXtcclxuICAgIGZvcih2YXIgaSA9IDAsZSA9IGJ1ZmZlcldpZHRoICogYnVmZmVySGVpZ2h0O2kgPCBlOysraSlcclxuICAgIHtcclxuICAgICAgYnVmZmVyRGF0YVtpICogNF0gPSAwO1xyXG4gICAgICBidWZmZXJEYXRhW2kgKiA0ICsgMV0gID0gMDtcclxuICAgICAgYnVmZmVyRGF0YVtpICogNCArIDJdID0gMDtcclxuICAgICAgYnVmZmVyRGF0YVtpICogNCArIDNdID0gMDsgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHJ1bigpe1xyXG4gICAgdmFyIGdlbiA9IChmdW5jdGlvbiAqICgpe1xyXG4gICAgICBjbHMoKTtcclxuICAgICAgdmFyICBpID0gMDtcclxuICAgICAgbGV0IHIsZyxiO1xyXG4gICAgICBmb3IobGV0IHkgPSAwOyB5IDwgMjQwOysreSl7XHJcbiAgICAgICAgZm9yKGxldCB4ID0gMDsgeCA8IDMyMDsrK3gpe1xyXG4gICAgICAgICAgaSs9MTtcclxuICAgICAgICAgIHIgPSAoaSA+PiA4KSAmIDB4ZmYsIFxyXG4gICAgICAgICAgZyA9IChpID4+IDQgKSAmIDB4ZmYsXHJcbiAgICAgICAgICBiID0gaSAmIDB4ZmY7XHJcbiAgICAgICAgICBwc2V0KHgseSx7cjpyLGc6ZyxiOmIsYToyNTV9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB5aWVsZDtcclxuICAgICAgfVxyXG4gICAgICB1cGRhdGVTdGF0dXMoU1RBVFVTLnN0b3ApO1xyXG4gICAgfSkoKTsgIFxyXG4gICAgbWFpbiA9IGdlbi5uZXh0LmJpbmQoZ2VuKTtcclxuICB9XHJcblxyXG4gIHJ1bkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcclxuICAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMucnVuKTtcclxuICAgIHJ1bigpO1xyXG4gIH0pO1xyXG4gIFxyXG4gIHBhdXNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gICAgaWYoc3RhdHVzID09IFNUQVRVUy5wYXVzZSl7XHJcbiAgICAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMucnVuKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHVwZGF0ZVN0YXR1cyhTVEFUVVMucGF1c2UpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBzdG9wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gICAgdXBkYXRlU3RhdHVzKFNUQVRVUy5zdG9wKTtcclxuICB9KTtcclxuXHJcbiAgLy8gcmVzZXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgLy8gICB1cGRhdGVTdGF0dXMoU1RBVFVTLnJlc2V0KTtcclxuICAvLyB9KTtcclxuXHJcbiAgdXBkYXRlU3RhdHVzKFNUQVRVUy5zdG9wKTtcclxuICByZW5kZXIoKTtcclxufSk7XHJcbiJdfQ==
